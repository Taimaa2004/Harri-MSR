import 'package:firebase_messaging/firebase_messaging.dart';

class FirebaseApi {
  final _firebaseMessaging = FirebaseMessaging.instance;

  Future<void> initNotifications() async {
    // Ask permission (iOS)
    await _firebaseMessaging.requestPermission();

    // Get token (optional: useful for debugging)
    String? token = await _firebaseMessaging.getToken();
    print("ğŸ“± FCM Token: $token");

    // ğŸ‘‡ Foreground messages listener
    FirebaseMessaging.onMessage.listen((RemoteMessage message) {
      print("ğŸ“© Foreground message: ${message.notification?.title}");
      print("ğŸ“© Body: ${message.notification?.body}");
    });

    // When user taps notification and opens app
    FirebaseMessaging.onMessageOpenedApp.listen((RemoteMessage message) {
      print("ğŸ“© Notification caused app to open: ${message.notification?.title}");
    });
  }
}
